<html><!-- Created using the cpp_pretty_printer from the dlib C++ library.  See http://dlib.net for updates. --><head><title>dlib C++ Library - jidctint.cpp</title></head><body bgcolor='white'><pre>
<font color='#009900'>/*
 * jidctint.c
 *
 * Copyright (C) 1991-1998, Thomas G. Lane.
 * This file is part of the Independent JPEG Group's software.
 * For conditions of distribution and use, see the accompanying README file.
 *
 * This file contains a slow-but-accurate integer implementation of the
 * inverse DCT (Discrete Cosine Transform).  In the IJG code, this routine
 * must also perform dequantization of the input coefficients.
 *
 * A 2-D IDCT can be done by 1-D IDCT on each column followed by 1-D IDCT
 * on each row (or vice versa, but it's more convenient to emit a row at
 * a time).  Direct algorithms are also available, but they are much more
 * complex and seem not to be any faster when reduced to code.
 *
 * This implementation is based on an algorithm described in
 *   C. Loeffler, A. Ligtenberg and G. Moschytz, "Practical Fast 1-D DCT
 *   Algorithms with 11 Multiplications", Proc. Int'l. Conf. on Acoustics,
 *   Speech, and Signal Processing 1989 (ICASSP '89), pp. 988-991.
 * The primary algorithm described there uses 11 multiplies and 29 adds.
 * We use their alternate method with 12 multiplies and 32 adds.
 * The advantage of this method is that no data path contains more than one
 * multiplication; this allows a very simple and accurate implementation in
 * scaled fixed-point arithmetic, with a minimal number of shifts.
 */</font>

<font color='#0000FF'>#define</font> JPEG_INTERNALS
<font color='#0000FF'>#include</font> "<a style='text-decoration:none' href='jinclude.h.html'>jinclude.h</a>"
<font color='#0000FF'>#include</font> "<a style='text-decoration:none' href='jpeglib.h.html'>jpeglib.h</a>"
<font color='#0000FF'>#include</font> "<a style='text-decoration:none' href='jdct.h.html'>jdct.h</a>"		<font color='#009900'>/* Private declarations for DCT subsystem */</font>

<font color='#0000FF'>#ifdef</font> DCT_ISLOW_SUPPORTED


<font color='#009900'>/*
 * This module is specialized to the case DCTSIZE = 8.
 */</font>

<font color='#0000FF'>#if</font> DCTSIZE <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>
  Sorry, <font color='#0000FF'>this</font> code only copes with <font color='#979000'>8</font>x8 DCTs. <font color='#009900'>/* deliberate syntax err */</font>
<font color='#0000FF'>#endif</font>


<font color='#009900'>/*
 * The poop on this scaling stuff is as follows:
 *
 * Each 1-D IDCT step produces outputs which are a factor of sqrt(N)
 * larger than the true IDCT outputs.  The final outputs are therefore
 * a factor of N larger than desired; since N=8 this can be cured by
 * a simple right shift at the end of the algorithm.  The advantage of
 * this arrangement is that we save two multiplications per 1-D IDCT,
 * because the y0 and y4 inputs need not be divided by sqrt(N).
 *
 * We have to do addition and subtraction of the integer inputs, which
 * is no problem, and multiplication by fractional constants, which is
 * a problem to do in integer arithmetic.  We multiply all the constants
 * by CONST_SCALE and convert them to integer constants (thus retaining
 * CONST_BITS bits of precision in the constants).  After doing a
 * multiplication we have to divide the product by CONST_SCALE, with proper
 * rounding, to produce the correct output.  This division can be done
 * cheaply as a right shift of CONST_BITS bits.  We postpone shifting
 * as long as possible so that partial sums can be added together with
 * full fractional precision.
 *
 * The outputs of the first pass are scaled up by PASS1_BITS bits so that
 * they are represented to better-than-integral precision.  These outputs
 * require BITS_IN_JSAMPLE + PASS1_BITS + 3 bits; this fits in a 16-bit word
 * with the recommended scaling.  (To scale up 12-bit sample data further, an
 * intermediate long array would be needed.)
 *
 * To avoid overflow of the 32-bit intermediate results in pass 2, we must
 * have BITS_IN_JSAMPLE + CONST_BITS + PASS1_BITS &lt;= 26.  Error analysis
 * shows that the values given below are the most effective.
 */</font>

<font color='#0000FF'>#if</font> BITS_IN_JSAMPLE <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>
<font color='#0000FF'>#define</font> CONST_BITS  <font color='#979000'>13</font>
<font color='#0000FF'>#define</font> PASS1_BITS  <font color='#979000'>2</font>
<font color='#0000FF'>#else</font>
<font color='#0000FF'>#define</font> CONST_BITS  <font color='#979000'>13</font>
<font color='#0000FF'>#define</font> PASS1_BITS  <font color='#979000'>1</font>		<font color='#009900'>/* lose a little precision to avoid overflow */</font>
<font color='#0000FF'>#endif</font>

<font color='#009900'>/* Some C compilers fail to reduce "FIX(constant)" at compile time, thus
 * causing a lot of useless floating-point operations at run time.
 * To get around this we use the following pre-calculated constants.
 * If you change CONST_BITS you may want to add appropriate values.
 * (With a reasonable C compiler, you can just rely on the FIX() macro...)
 */</font>

<font color='#0000FF'>#if</font> CONST_BITS <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>13</font>
<font color='#0000FF'>#define</font> FIX_0_298631336  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font>  <font color='#979000'>2446</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.298631336) */</font>
<font color='#0000FF'>#define</font> FIX_0_390180644  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font>  <font color='#979000'>3196</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.390180644) */</font>
<font color='#0000FF'>#define</font> FIX_0_541196100  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font>  <font color='#979000'>4433</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.541196100) */</font>
<font color='#0000FF'>#define</font> FIX_0_765366865  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font>  <font color='#979000'>6270</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.765366865) */</font>
<font color='#0000FF'>#define</font> FIX_0_899976223  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font>  <font color='#979000'>7373</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.899976223) */</font>
<font color='#0000FF'>#define</font> FIX_1_175875602  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font>  <font color='#979000'>9633</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(1.175875602) */</font>
<font color='#0000FF'>#define</font> FIX_1_501321110  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font>  <font color='#979000'>12299</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(1.501321110) */</font>
<font color='#0000FF'>#define</font> FIX_1_847759065  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font>  <font color='#979000'>15137</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(1.847759065) */</font>
<font color='#0000FF'>#define</font> FIX_1_961570560  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font>  <font color='#979000'>16069</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(1.961570560) */</font>
<font color='#0000FF'>#define</font> FIX_2_053119869  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font>  <font color='#979000'>16819</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(2.053119869) */</font>
<font color='#0000FF'>#define</font> FIX_2_562915447  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font>  <font color='#979000'>20995</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(2.562915447) */</font>
<font color='#0000FF'>#define</font> FIX_3_072711026  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font>  <font color='#979000'>25172</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(3.072711026) */</font>
<font color='#0000FF'>#else</font>
<font color='#0000FF'>#define</font> FIX_0_298631336  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.298631336</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_0_390180644  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.390180644</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_0_541196100  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.541196100</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_0_765366865  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.765366865</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_0_899976223  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.899976223</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_1_175875602  FIX<font face='Lucida Console'>(</font><font color='#979000'>1.175875602</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_1_501321110  FIX<font face='Lucida Console'>(</font><font color='#979000'>1.501321110</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_1_847759065  FIX<font face='Lucida Console'>(</font><font color='#979000'>1.847759065</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_1_961570560  FIX<font face='Lucida Console'>(</font><font color='#979000'>1.961570560</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_2_053119869  FIX<font face='Lucida Console'>(</font><font color='#979000'>2.053119869</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_2_562915447  FIX<font face='Lucida Console'>(</font><font color='#979000'>2.562915447</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_3_072711026  FIX<font face='Lucida Console'>(</font><font color='#979000'>3.072711026</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#endif</font>


<font color='#009900'>/* Multiply an long variable by an long constant to yield an long result.
 * For 8-bit samples with the recommended scaling, all the variable
 * and constant values involved are no more than 16 bits wide, so a
 * 16x16-&gt;32 bit multiply can be used instead of a full 32x32 multiply.
 * For 12-bit samples, a full 32-bit multiplication will be needed.
 */</font>

<font color='#0000FF'>#if</font> BITS_IN_JSAMPLE <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>
<font color='#0000FF'>#define</font> MULTIPLY<font face='Lucida Console'>(</font>var,<font color='#0000FF'>const</font><font face='Lucida Console'>)</font>  MULTIPLY16C16<font face='Lucida Console'>(</font>var,<font color='#0000FF'>const</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#else</font>
<font color='#0000FF'>#define</font> MULTIPLY<font face='Lucida Console'>(</font>var,<font color='#0000FF'>const</font><font face='Lucida Console'>)</font>  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>var<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> <font face='Lucida Console'>(</font><font color='#0000FF'>const</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#endif</font>


<font color='#009900'>/* Dequantize a coefficient by multiplying it by the multiplier-table
 * entry; produce an int result.  In this module, both inputs and result
 * are 16 bits or less, so either int or short multiply will work.
 */</font>

<font color='#0000FF'>#define</font> DEQUANTIZE<font face='Lucida Console'>(</font>coef,quantval<font face='Lucida Console'>)</font>  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>ISLOW_MULT_TYPE<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>coef<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> <font face='Lucida Console'>(</font>quantval<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_islow'></a>jpeg_idct_islow</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		 JCOEFPTR coef_block,
		 JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  <font color='#0000FF'><u>long</u></font> tmp0, tmp1, tmp2, tmp3;
  <font color='#0000FF'><u>long</u></font> tmp10, tmp11, tmp12, tmp13;
  <font color='#0000FF'><u>long</u></font> z1, z2, z3, z4, z5;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[DCTSIZE2];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true IDCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE; ctr <font color='#5555FF'>&gt;</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Due to quantization, we will usually find that many of the input
     * coefficients are zero, especially the AC terms.  We can exploit this
     * by short-circuiting the IDCT calculation for any column in which all
     * the AC terms are zero.  In that case each output is equal to the
     * DC coefficient (with scale factor as needed).
     * With typical images and quantization tables, half or more of the
     * column DCT calculations can be simplified this way.
     */</font>
    
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
      <font color='#009900'>/* AC terms all zero */</font>
      <font color='#0000FF'><u>int</u></font> dcval <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;
      
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> dcval;
      
      inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointers to next column */</font>
      quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
      wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
      <font color='#0000FF'>continue</font>;
    <b>}</b>
    
    <font color='#009900'>/* Even part: reverse the even part of the forward DCT. */</font>
    <font color='#009900'>/* The rotator is sqrt(2)*c(-6). */</font>
    
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#5555FF'>-</font> FIX_1_847759065<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>;
    
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;

    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;
    
    <font color='#009900'>/* Odd part per figure 8; the matrix is unitary and hence its
     * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.
     */</font>
    
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    
    z1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    z2 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    z3 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    z4 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    z5 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>+</font> z4, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * c3 */</font>
    
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, FIX_0_298631336<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1+c3+c5-c7) */</font>
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, FIX_2_053119869<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5+c7) */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, FIX_3_072711026<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3+c5-c7) */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, FIX_1_501321110<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5-c7) */</font>
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c7-c3) */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1-c3) */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c3-c5) */</font>
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c5-c3) */</font>
    
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z5;
    z4 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z5;
    
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> z4;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> z3;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z4;
    
    <font color='#009900'>/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */</font>
    
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp3, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp3, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    
    inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointers to next column */</font>
    quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
  <b>}</b>
  
  <font color='#009900'>/* Pass 2: process rows from work array, store into output array. */</font>
  <font color='#009900'>/* Note that we must descale the results by a factor of 8 == 2**3, */</font>
  <font color='#009900'>/* and also undo the PASS1_BITS scaling. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> DCTSIZE; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;
    <font color='#009900'>/* Rows of zeroes can be exploited in the same way as we did with columns.
     * However, the column calculation has created many nonzero AC terms, so
     * the simplification applies less often (typically 5% to 10% of the time).
     * On machines with very fast multiplication, it's possible that the
     * test takes more time than it's worth.  In that case this section
     * may be commented out.
     */</font>
    
<font color='#0000FF'>#ifndef</font> NO_ZERO_ROW_TEST
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>wsptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> wsptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> wsptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> wsptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	wsptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> wsptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> wsptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
      <font color='#009900'>/* AC terms all zero */</font>
      JSAMPLE dcval <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>], PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
				  <font color='#5555FF'>&amp;</font> RANGE_MASK];
      
      outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> dcval;

      wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
      <font color='#0000FF'>continue</font>;
    <b>}</b>
<font color='#0000FF'>#endif</font>
    
    <font color='#009900'>/* Even part: reverse the even part of the forward DCT. */</font>
    <font color='#009900'>/* The rotator is sqrt(2)*c(-6). */</font>
    
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];
    
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#5555FF'>-</font> FIX_1_847759065<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>;
    
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp3;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;
    
    <font color='#009900'>/* Odd part per figure 8; the matrix is unitary and hence its
     * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.
     */</font>
    
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    tmp2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    tmp3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    
    z1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    z2 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2;
    z3 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    z4 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    z5 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>+</font> z4, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * c3 */</font>
    
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, FIX_0_298631336<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1+c3+c5-c7) */</font>
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, FIX_2_053119869<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5+c7) */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, FIX_3_072711026<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3+c5-c7) */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, FIX_1_501321110<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5-c7) */</font>
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c7-c3) */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1-c3) */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c3-c5) */</font>
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c5-c3) */</font>
    
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z5;
    z4 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z5;
    
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> z4;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> z3;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z4;
    
    <font color='#009900'>/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */</font>
    
    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp3,
					  CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp3,
					  CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp2,
					  CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp2,
					  CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp1,
					  CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp1,
					  CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp0,
					  CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp0,
					  CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    
    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>

<font color='#0000FF'>#endif</font> <font color='#009900'>/* DCT_ISLOW_SUPPORTED */</font>

</pre></body></html>